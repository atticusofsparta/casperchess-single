(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{16:function(e,t,a){},32:function(e,t,a){e.exports={modalRoot:"ModalRoot_modalRoot__2IeyM","modal-content":"ModalRoot_modal-content__2nawS","modal-dialog":"ModalRoot_modal-dialog__1SNzN"}},34:function(e,t,a){e.exports=a(70)},48:function(e,t,a){},69:function(e,t,a){},70:function(e,t,a){"use strict";a.r(t);var n=a(0),o=a.n(n),l=a(18),c=a.n(l),r=a(6),s=a.n(r),i=a(10),u=a(2),m=a(7),d=a(3),h=(a(16),a(48),function(){return o.a.createElement("div",null,o.a.createElement("header",null,"Welcome to Casper Chess"),o.a.createElement("h3",null,"The only chess game that lets you save your win to the blockchain, so you can brag forever"),o.a.createElement("div",{className:"contentContainer"},o.a.createElement("div",{className:"howItWorks"},o.a.createElement("div",{className:"largeText"},"HOW IT WORKS:"),o.a.createElement("div",null,o.a.createElement("ol",null,o.a.createElement("li",null,"Fund your wallet from the testnet ",o.a.createElement("a",{href:"https://testnet.cspr.live/tools/faucet"},"here.")),o.a.createElement("li",null,'Connect your Casper wallet by click the "connect" button above, the signer will prompt you to connect'),o.a.createElement("li",null,"Go to the game tab and play a game against the computer. Once you win - or lose - your session score will go up. The session score is the second number in the score area, the first number is your saved score. When you are done playing, you can save to chain! You can play as many games as you want before saving, and saving is optional. If you dont save, and if you reload the page, you will lose your session score."),o.a.createElement("li",null,'To save to chain, click on the "save" button. You will be prompted to sign a transaction. Wait for your saved score to update. Once the score updates, your session score is saved to the blockchain. Good luck!')))),o.a.createElement("div",{className:"noCasper"},o.a.createElement("div",{className:"largeText"},"Dont have a Casper account?"),o.a.createElement("div",null,"Download the Casper Signer extension"," ",o.a.createElement("a",{href:"https://chrome.google.com/webstore/detail/casper-signer/djhndpllfiibmcdbnmaaahkhchcoijce",target:"_blank",rel:"noopener noreferrer",alt:""},"here")),o.a.createElement("div",null,"set a new password to create a Vault"),o.a.createElement("div",null,'Then you can choose the "Create Account" option'),o.a.createElement("div",null,'set your name and then choose "ED25519" as the Algorithm'),o.a.createElement("div",null,"dont forget to download your secret key so you can recover your account if you forget your password"))),o.a.createElement("div",{className:"chessRulesContainer"},o.a.createElement("div",{className:"LargeText"}," How to Play Chess"),o.a.createElement("div",{className:"chessRules"},o.a.createElement("div",{className:"pieces"},o.a.createElement("ul",{className:"piecesList"},o.a.createElement("li",null,"King: the king may move one square in any direction, so long as no piece is blocking his path and the move does not put the king in check."),o.a.createElement("li",null,"Queen: the queen may move any number of squares straight or diagonally in any direction."),o.a.createElement("li",null,"Rook: sometimes called a Castle, the rook may move any number of squares in a straight line, horizontally or vertically."),o.a.createElement("li",null,"Bishop: the bishop may move any number of squares diagonally"),o.a.createElement("li",null,'Knight: the knight moves three squares total in an "L" shape. One square horizontally or vertically and two squares in a direction 90 degrees to the original direction. The knight "jumps" to its new position and is not blocked by other pieces in its way.'),o.a.createElement("li",null,"Pawn: pawns generally move only one square in the direction of your opponents side of the board. On its first move from the starting position, the pawn can move two squares. While it can only move straight ahead, a pawn can only attack diagonally. So if its path ahead is blocked, it cannot move."))))),o.a.createElement("br",null),o.a.createElement("div",{className:"bottomContainer"},o.a.createElement("div",{className:"specialMovesContainer"},o.a.createElement("div",{className:"largeText"},"Special Moves"),o.a.createElement("div",{className:"specialMoves"},o.a.createElement("ul",null,o.a.createElement("li",null,"EN PASSANT: if a pawn moves forward three squares, it is even with where the opponents pawn would be if it moved forward two squares. If the opposing pawn uses its initial two square move to become even with your pawn, you may attack the opponent diagonally and take the piece as if it had only moved one square."),o.a.createElement("li",null,"Castle: if there are no pieces between your king and either of your rooks, and neither piece has moved, you can move the king two squares towards the rook and move the rook one square on the opposite side of the king. You cannot castle into, out of, or through check.")))),o.a.createElement("div",{className:"objectiveContainer"},o.a.createElement("div",{className:"largeText"},"Objectives and terms"),o.a.createElement("div",{className:"objectives"},o.a.createElement("ul",null,o.a.createElement("li",null,"Check: if a king can be directly taken by an opponent's piece on the opponent's next turn, the king is in check. If your king is in check you must move your kinbg out of check or move another piece to block your opponent."),o.a.createElement("li",null,"CheckMate: if a king is in check and there is no possible move to get out of check, it is a checkmate and the game is over. Whomever is in checkmate loses."),o.a.createElement("li",null,"StaleMate: if a king is not in check, but there are no moves that can be made without placing itself in check, it is called a StaleMate and the game ends in a draw."))))))}),p=function(){return o.a.createElement("p",null,"nothing here.... watchya looking for?")},f=a(4),E=a(29),b=a.n(E),v=a(30);function g(e){return o.a.createElement("div",{className:"modal d-block"},o.a.createElement("div",{className:"modal-dialog"},o.a.createElement("div",{className:"modal-content"},e.children)))}function y(e){return o.a.createElement("div",{className:"modal-body"},e.children)}function w(e){return o.a.createElement("div",{className:"modal-header"},e.children)}function k(e){return o.a.createElement("div",{className:"modal-footer"},e.children)}var O={on:function(e,t){document.addEventListener(e,function(e){return t(e.detail)})},open:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};document.dispatchEvent(new CustomEvent("open",{detail:{component:e,props:t}}))},close:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};document.dispatchEvent(new CustomEvent("close",{detail:{component:e,props:t}}))}};function C(e){O.open(e),console.log("modal added")}function j(e){O.close(e),console.log("modal closed")}function N(e,t){var a=e.gametoapp,l=t.boardWidth,c=Object(n.useRef)(),r=Object(n.useState)(new b.a),s=Object(u.a)(r,2),i=s[0],m=s[1],d=Object(n.useState)("white"),h=Object(u.a)(d,2),p=h[0],E=(h[1],Object(n.useState)()),O=Object(u.a)(E,2),N=O[0],S=O[1],x=Object(n.useState)(""),T=Object(u.a)(x,2),_=T[0],B=T[1],I=Object(n.useState)(""),q=Object(u.a)(I,2),L=q[0],R=q[1],M=Object(n.useState)(""),P=Object(u.a)(M,2),W=P[0],K=P[1];function D(e){m(function(t){var a=Object(f.a)({},t);return e(a),a})}function G(){var e=i.moves();if(!i.game_over()&&!i.in_draw()&&0!==e.length){var t=Math.floor(Math.random()*e.length);D(function(a){a.move(e[t])})}}function A(){j(),D(function(e){e.reset(),K(""),B(""),R("")}),clearTimeout(N)}function H(e){return o.a.createElement(g,null,o.a.createElement(w,null,o.a.createElement("h3",null,"Congratulations!")),o.a.createElement(y,null,o.a.createElement("p",null,"You Won!")),o.a.createElement(k,null,o.a.createElement("button",{onClick:A,className:"btn btn-primary"},"OK")))}function F(e){return o.a.createElement(g,null,o.a.createElement(w,null,o.a.createElement("h3",null,"Better Luck Next Time")),o.a.createElement(y,null,o.a.createElement("p",null,"You Lost")),o.a.createElement(k,null,o.a.createElement("button",{onClick:A,className:"btn btn-primary"},"OK")))}function J(e){return o.a.createElement(g,null,o.a.createElement(w,null,o.a.createElement("h3",null,"So Close")),o.a.createElement(y,null,o.a.createElement("p",null,"This game was a draw")),o.a.createElement(k,null,o.a.createElement("button",{onClick:A,className:"btn btn-primary"},"OK")))}function V(){return Object(n.useEffect)(function(){var e=i.history(),t=JSON.stringify(e);document.getElementById("fenlogger").innerHTML=t},[]),o.a.createElement("div",{id:"fenlogger"})}return Object(n.useEffect)(function(){if(!0===i.in_checkmate()){var e=i.turn();"b"===e&&(B(!0),console.log("white wins")),"w"===e&&(B(!1),console.log("black wins")),console.log("".concat(e," in checkmate"))}i.in_stalemate()|!0===i.in_draw()&&(R(!0),console.log("in stalemate ",L))},[i,W]),Object(n.useEffect)(function(){!0===_&&(K("win"),C(H)),!1===_&&(K("loss"),C(F)),!0===L&&(K("stalemate"),C(J)),a(W)},[i,_,L,W]),o.a.createElement("div",{id:"gameContainer"},o.a.createElement("div",{id:"boardContainer"},o.a.createElement(v.a,{id:"myboard",animationDuration:200,boardOrientation:p,boardWidth:l,position:i.fen(),onPieceDrop:function(e,t){var a=Object(f.a)({},i),n=a.move({from:e,to:t,promotion:"q"});if(m(a),null===n)return!1;var o=setTimeout(G,200);return S(o),!0},customBoardStyle:{borderRadius:"4px",boxShadow:"0 5px 15px rgba(0, 0, 0, 0.5)"},ref:c}),o.a.createElement(V,null)),o.a.createElement("br",null),o.a.createElement("div",{id:"boardBtnContainer"}," ",o.a.createElement("button",{id:"boardBtn",className:"rc-button",onClick:function(){D(function(e){e.reset(),K(""),B(""),R("")}),clearTimeout(N)}},"reset"),o.a.createElement("button",{id:"boardBtn",className:"rc-button",onClick:function(){D(function(e){e.undo()}),clearTimeout(N)}},"undo")))}var S=a(12),x=function(){return o.a.createElement("ul",{className:"navbar-nav me-auto"},o.a.createElement("li",{className:"nav-item"},o.a.createElement(S.b,{to:"/",className:"nav-link"},"Home")),o.a.createElement("li",{className:"nav-item"},o.a.createElement(S.b,{to:"/Game",className:"nav-link"},"Game")))},T=a(11),_=a.n(T),B=a(31),I=a(32),q=a.n(I);function L(){var e=Object(n.useState)({}),t=Object(u.a)(e,2),a=t[0],l=t[1];Object(n.useEffect)(function(){O.on("open",function(e){var t=e.component,a=e.props;l({component:t,props:a,close:function(e){l({})}})}),O.on("close",function(e){Object(B.a)(e),l({})})},[]);var c=a.component?a.component:null;return o.a.createElement("section",{className:a.component?q.a.modalRoot:""},c&&o.a.createElement(c,Object.assign({},a.props,{close:a.close,className:c?"d-block":""})))}function R(e){return o.a.createElement(g,null,o.a.createElement(w,null,o.a.createElement("h3",null,"Saving")),o.a.createElement(y,null,o.a.createElement("p",null,"Please follow the prompts from the Casper Signer to complete saving to the blockchain.")),o.a.createElement(k,null))}a(69);function M(e){return o.a.createElement(g,null,o.a.createElement(w,null,o.a.createElement("h3",null,"Writing to the blockchain")),o.a.createElement(y,null,o.a.createElement("p",null,"Please wait while your results are written to the blockchain."),o.a.createElement("center",null,o.a.createElement("div",{class:"lds-dual-ring"}))),o.a.createElement(k,null))}var P=null,W="http://localhost:6100/api",K=(new m.CasperServiceByJsonRPC(W),new m.CasperClient(W),new m.CasperClient(W)),D=new m.Contracts.Contract(K),G="hash-6f978f1bd5d7071d464fa3c4fe72f5c4d7aedbad6b558402ccf5d7aecbfd915b";var A=function(){var e=Object(n.useState)(""),t=Object(u.a)(e,2),a=t[0],l=t[1],c=Object(n.useState)("?"),r=Object(u.a)(c,2),f=r[0],E=r[1],b=Object(n.useState)("?"),v=Object(u.a)(b,2),g=v[0],y=v[1],w=Object(n.useState)(0),k=Object(u.a)(w,2),O=k[0],S=k[1],T=Object(n.useState)(0),B=Object(u.a)(T,2),I=B[0],q=B[1],W=Object(n.useState)(0),K=Object(u.a)(W,2),A=K[0],H=K[1],F=Object(n.useState)(0),J=Object(u.a)(F,2),V=J[0],Y=J[1],z=Object(n.useState)(0),U=Object(u.a)(z,2),Q=U[0],X=U[1],Z=Object(n.useState)(0),$=Object(u.a)(Z,2),ee=$[0],te=$[1],ae=Object(n.useState)(0),ne=Object(u.a)(ae,2),oe=ne[0],le=ne[1],ce=Object(n.useState)(0),re=Object(u.a)(ce,2),se=re[0],ie=re[1];function ue(){return(ue=Object(i.a)(s.a.mark(function e(){return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:try{m.Signer.sendConnectionRequest().then(console.log("connect"))}catch(t){console.log(t)}case 1:case"end":return e.stop()}},e)}))).apply(this,arguments)}function me(){return(me=Object(i.a)(s.a.mark(function e(){var t,a,n,o,l,c,r,i;return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:C(R),t=O+Q,a=I+ee,n=A+oe,o=V+se,l=m.RuntimeArgs.fromMap({new_total_games:m.CLValueBuilder.u512(t),new_wins:m.CLValueBuilder.u512(a),new_losses:m.CLValueBuilder.u512(n),new_stalemates:m.CLValueBuilder.u512(o)}),c=m.CLPublicKey.fromHex(g),D.setContractHash(G),r=D.callEntrypoint("add_game",l,c,"casper-test",(s=1,s*Math.pow(10,9)).toString(),[],1e7),i=m.DeployUtil.deployToJson(r),m.Signer.sign(i,g).then(function(e){j(),de(e)}).catch(function(e){console.log(e),console.log(l),j()});case 11:case"end":return e.stop()}var s},e)}))).apply(this,arguments)}function de(e){return he.apply(this,arguments)}function he(){return(he=Object(i.a)(s.a.mark(function e(t){return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:C(M),_.a.post("http://localhost:6100/sendDeploy",t,{headers:{"Content-Type":"application/json"}}).then(function(e){pe(e.data)}).catch(function(e){alert(e),j()});case 2:case"end":return e.stop()}},e)}))).apply(this,arguments)}function pe(e){return fe.apply(this,arguments)}function fe(){return(fe=Object(i.a)(s.a.mark(function e(t){return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:Ee(t),P=setInterval(function(){Ee(t)},5e3);case 2:case"end":return e.stop()}},e)}))).apply(this,arguments)}function Ee(e){return be.apply(this,arguments)}function be(){return(be=Object(i.a)(s.a.mark(function e(t){return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:_.a.get("http://localhost:6100/getDeploy",{params:{hash:t}},{headers:{"Content-Type":"application/json"}}).then(function(e){if(0!=e.data.length){var t=e.data[0];if(t.hasOwnProperty("result")){var a=t.result;console.log(e.data),a.hasOwnProperty("Success")?(console.log("Success!"),X(0),te(0),le(0),ie(0),console.log("Execution Successful"),j()):a.hasOwnProperty("Failure")?(console.log("Execution Failure"),j()):(console.log("Unknown Error"),j()),clearInterval(P)}else console.log("Doesnt have result yet")}else console.log("No return data yet")}).catch(function(e){alert(e),j(),clearInterval(P)});case 1:case"end":return e.stop()}},e)}))).apply(this,arguments)}return Object(n.useEffect)(function(){"win"===a&&te(ee+1),"loss"===a&&le(oe+1),"stalemate"===a&&ie(se+1),0|"win"===a&&X(Q+1)},[a]),Object(n.useEffect)(function(){var e=document.getElementById("textAddress"),t=document.getElementById("textBalance"),a=document.getElementById("textTotal_Games"),n=document.getElementById("textWins"),o=document.getElementById("textLosses"),l=document.getElementById("textStalemates");e.textContent="Connected account: ".concat(g.replace(g.slice(5,61)," . . . ")),t.textContent="CSPR Balance: ".concat(f/1e9),a.textContent="Total Games: ".concat(O)+" + ".concat(Q),n.textContent="Wins: ".concat(I)+" + ".concat(ee),o.textContent="Losses: ".concat(A)+" + ".concat(oe),l.textContent="Stalemates: ".concat(V)+" + ".concat(se)},[g,f,O,I,A,V,Q,ee,oe,se]),Object(n.useEffect)(function(){function e(){return(e=Object(i.a)(s.a.mark(function e(){var t;return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,window.casperlabsHelper.getActivePublicKey();case 2:t=e.sent,y(t),_.a.post("http://localhost:6100/balance",{publicKey:t}).then(function(e){var t=e.data;E(t),console.log(t)}),_.a.get("http://localhost:6100/get_total_games",{params:{publicKey:t}}).then(function(e){S(parseInt(e.data.hex,16))}),_.a.get("http://localhost:6100/get_wins",{params:{publicKey:t}}).then(function(e){q(parseInt(e.data.hex,16))}),_.a.get("http://localhost:6100/get_losses",{params:{publicKey:t}}).then(function(e){H(parseInt(e.data.hex,16))}),_.a.get("http://localhost:6100/get_stalemates",{params:{publicKey:t}}).then(function(e){Y(parseInt(e.data.hex,16))});case 9:case"end":return e.stop()}},e)}))).apply(this,arguments)}return setInterval(function(){return e.apply(this,arguments)},1e4)},[]),o.a.createElement("div",null,o.a.createElement(L,null),o.a.createElement("nav",{className:"navbar navbar-expand-lg navbar-dark bg-dark"},o.a.createElement("div",{className:"container-fluid"},o.a.createElement("a",{className:"navbar-brand",href:"/Home"},"Casper Chess"),o.a.createElement("ul",{className:"navbar-nav me-auto"},o.a.createElement(x,null),o.a.createElement("li",{className:"nav-item"},o.a.createElement("a",{className:"nav-link",id:"connectBtn",onClick:function(){return ue.apply(this,arguments)}},"Connect")),o.a.createElement("li",{className:"nav-item"},o.a.createElement("a",{className:"nav-link",id:"deployBtn",onClick:function(){return me.apply(this,arguments)}},"Save"))),o.a.createElement("ul",null,o.a.createElement("li",{id:"textAddress"},"Connected account: "),o.a.createElement("li",{id:"textBalance"},"CSPR Balance: ")),o.a.createElement("ul",null,o.a.createElement("li",{id:"textTotal_Games"},"Total Games: "),o.a.createElement("li",{id:"textWins"},"Wins: ")),o.a.createElement("ul",null,o.a.createElement("li",{id:"textLosses"},"Losses: "),o.a.createElement("li",{id:"textStalemates"},"Stalemates: ")))),o.a.createElement(d.d,null,o.a.createElement(d.b,{path:"/",element:o.a.createElement(x,null)}),o.a.createElement(d.b,{index:!0,element:o.a.createElement(h,null)}),o.a.createElement(d.b,{path:"/Game",element:o.a.createElement(N,{gametoapp:function(e){""===e&&l(""),"win"===e&&l("win"),"loss"===e&&l("loss"),"stalemate"===e&&l("stalemate"),console.log("gameResult",e)}})}),o.a.createElement(d.b,{path:"*",element:o.a.createElement(p,null)})),o.a.createElement(d.a,null))},H=function(e){e&&e instanceof Function&&a.e(3).then(a.bind(null,71)).then(function(t){var a=t.getCLS,n=t.getFID,o=t.getFCP,l=t.getLCP,c=t.getTTFB;a(e),n(e),o(e),l(e),c(e)})};c.a.render(o.a.createElement(o.a.StrictMode,null,o.a.createElement(S.a,null,o.a.createElement(A,null))),document.getElementById("root")),H()}},[[34,1,2]]]);
//# sourceMappingURL=main.3b7ccf85.chunk.js.map